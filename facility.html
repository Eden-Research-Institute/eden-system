<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDEN INSTITUTE - FACILITY</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;700&display=swap');

        :root {
            --bg-color: #121212;
            --sidebar-bg: #1e1e1e;
            --card-bg: #252525;
            --border: #333;
            --accent: #00ff9d;
            --danger: #ff4b4b;
            --warning: #ffaa00;
            --text-main: #ffffff;
            --text-sub: #888;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        /* === ÏÇ¨Ïù¥ÎìúÎ∞î === */
        .sidebar {
            width: 240px; height: 100vh; background-color: var(--sidebar-bg); border-right: 1px solid var(--border);
            position: fixed; top: 0; left: 0; display: flex; flex-direction: column; padding: 20px; z-index: 100; overflow-y: auto;
        }
        .logo { font-size: 16px; font-weight: 700; color: var(--accent); letter-spacing: 2px; margin-bottom: 40px; display: flex; align-items: center; gap: 10px; }
        .logo::before { content: '‚ùñ'; font-size: 20px; }
        .menu-item { padding: 12px 15px; color: var(--text-sub); border-radius: 6px; margin-bottom: 4px; transition: 0.2s; font-size: 14px; display: flex; align-items: center; gap: 12px; font-weight: 500; text-decoration: none; flex-shrink: 0; }
        .menu-item:hover, .menu-item.active { background-color: rgba(0, 255, 157, 0.05); color: var(--accent); }
        
        .profile-box { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border); display: flex; align-items: center; gap: 12px; }
        .avatar { width: 32px; height: 32px; background: #333; border-radius: 4px; display: flex; justify-content: center; align-items: center; font-weight: bold; color: #fff; font-size: 14px; }
        /* ‚ñº‚ñº‚ñº ÌÅ¥Î¶≠ Í∞ÄÎä• Ïª§ÏÑú Ï∂îÍ∞Ä ‚ñº‚ñº‚ñº */
        .user-info { cursor: pointer; } 
        .user-info:hover h4 { color: var(--accent); text-decoration: underline; }
        .user-info h4 { margin: 0; font-size: 13px; color: #fff; font-weight: 600; }
        .user-info p { margin: 0; font-size: 11px; color: var(--danger); margin-top: 3px; font-weight: bold;}

        /* === Î©îÏù∏ ÏΩòÌÖêÏ∏† === */
        .main-content { margin-left: 240px; padding: 30px; display: flex; flex-direction: column; gap: 20px; min-height: 100vh; }
        .header-area { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 10px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        .page-title h1 { margin: 0; font-size: 20px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;}
        .page-title p { margin: 5px 0 0; color: var(--text-sub); font-size: 12px; }
        .clock-area { text-align: right; display: block !important; }
        .clock-time { font-size: 24px; font-weight: 600; color: var(--text-main); letter-spacing: 1px; }
        .clock-date { font-size: 11px; color: var(--text-sub); margin-top: 2px; text-transform: uppercase; text-align: right;}

        /* === ÏãúÏÑ§ Ï∏µÎ≥Ñ Ïπ¥Îìú Ïä§ÌÉÄÏùº === */
        .floor-card {
            background-color: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; padding: 25px; position: relative; margin-bottom: 20px;
        }
        .floor-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .floor-title { font-size: 16px; font-weight: 700; color: #fff; display: flex; align-items: center; gap: 10px; }
        .floor-tag { font-size: 11px; padding: 3px 8px; border-radius: 4px; background: #333; color: #aaa; font-weight: normal; }
        
        /* Íµ¨Ïó≠ Í∑∏Î¶¨Îìú */
        .zone-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .zone-box { 
            background: rgba(0,0,0,0.2); border: 1px solid #444; border-radius: 6px; padding: 15px; 
            display: flex; flex-direction: column; gap: 8px; transition: 0.2s; min-height: 80px;
        }
        .zone-box:hover { border-color: var(--accent); background: rgba(0, 255, 157, 0.05); }
        .zone-name { font-size: 13px; color: #ccc; font-weight: 600; margin-bottom: 5px;}
        
        /* Ïù∏Ïõê ÌëúÏãú ÏïÑÏù¥ÏΩò */
        .occupancy { display: flex; flex-direction: column; gap: 4px; font-size: 12px; margin-top: auto; }
        .occ-item { display: flex; align-items: center; gap: 6px; }
        .icon-staff { color: #4facfe; } 
        .icon-sub { color: #ffaa00; } 
        
        /* Ïπ¥Ïù¥Î°ú & Î¶¨ÌîåÎ¶¨ Ï†ÑÏö© Ïä§ÌÉÄÏùº */
        .special-badge { 
            display: inline-flex; align-items: center; gap: 5px;
            padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 11px; width: fit-content; margin-bottom: 2px;
        }
        .badge-kairo { background: rgba(255, 75, 75, 0.15); color: var(--danger); border: 1px solid var(--danger); }
        .badge-ripley { background: rgba(0, 255, 157, 0.15); color: var(--accent); border: 1px solid var(--accent); animation: pulse 2s infinite; }
        
        @keyframes pulse { 0% { opacity: 1; box-shadow: 0 0 5px var(--accent); } 50% { opacity: 0.7; box-shadow: none; } 100% { opacity: 1; box-shadow: 0 0 5px var(--accent); } }

        /* Î≥¥Ïïà Îì±Í∏â Î±ÉÏßÄ */
        .sec-level { font-size: 10px; padding: 2px 5px; border-radius: 3px; margin-left: auto; }
        .sec-1 { border: 1px solid #4facfe; color: #4facfe; } 
        .sec-2 { border: 1px solid #ffaa00; color: #ffaa00; } 
        .sec-3 { border: 1px solid var(--danger); color: var(--danger); } 
        
        /* ÌòÑÏû¨ ÏÉÅÌÉú ÌëúÏãúÏ§Ñ */
        .status-banner {
            grid-column: 1 / -1; background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; 
            margin-bottom: 10px; display: flex; gap: 15px; align-items: center; font-size: 13px; border-left: 3px solid var(--accent);
        }
        .kairo-status { color: #fff; font-weight: bold; }

        /* Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
        @media (max-width: 768px) {
            .sidebar { 
                width: 100%; height: 55px; flex-direction: row; align-items: center;
                border-right: none; border-bottom: 1px solid var(--border); 
                position: sticky; top: 0; padding: 0 10px; padding-right: 130px; 
                overflow-x: auto; white-space: nowrap; 
            }
            .sidebar::-webkit-scrollbar { display: none; }
            .logo { display: none; }
            .menu-item { margin-bottom: 0; margin-right: 5px; background: #222; padding: 6px 10px; height: 36px; }
            .profile-box { 
                position: fixed; top: 0; right: 0; width: 120px; height: 55px;
                background: #1a1a1a; border-left: 2px solid var(--border); border-top: none;
                display: flex !important; justify-content: center; z-index: 1000;
                padding: 0; margin: 0; box-shadow: -5px 0 10px rgba(0,0,0,0.5);
            }
            .main-content { margin-left: 0; padding: 15px; }
            .header-area { flex-direction: column; align-items: flex-start; gap: 5px; }
            .clock-area { text-align: left; margin-top: 5px; }
            .zone-grid { grid-template-columns: 1fr; } 
            .status-banner { flex-direction: column; align-items: flex-start; gap: 5px; }
        }
    </style>
</head>
<body>
    <nav class="sidebar">
        <div class="logo">EDEN LAB.</div>
        <a href="main.html" class="menu-item"><span>üìä</span> <span>ÎåÄÏãúÎ≥¥Îìú</span></a>
        <a href="subjects.html" class="menu-item"><span>üß¨</span> <span>Ïã§ÌóòÏ≤¥ Í¥ÄÎ¶¨</span></a>
        <a href="facility.html" class="menu-item active"><span>üè¢</span> <span>ÏãúÏÑ§ Í¥ÄÎ¶¨</span></a>
        <a href="#" class="menu-item" onclick="alert('Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.')"><span>üë•</span> <span>Ï°∞ÏßÅ/Ïù∏ÏÇ¨</span></a>
        <a href="#" class="menu-item" onclick="alert('Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.')"><span>üåê</span> <span>ÎåÄÏô∏ ÌôàÌéòÏù¥ÏßÄ</span></a>
        
        <div class="profile-box">
            <div class="avatar">K</div>
            <div class="user-info" onclick="alert('ÏàòÏã†Îêú Î©îÏãúÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§.')">
                <h4>KAIRO</h4> <p style="color:var(--danger);">LEVEL 5</p>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="header-area">
            <div class="page-title">
                <h1>Facility</h1> <p>INTERNAL STRUCTURE MAP & SENSORS</p>
            </div>
            <div class="clock-area mono">
                <div class="clock-time" id="clock">00:00:00</div>
                <div class="clock-date" id="date">YYYY-MM-DD</div>
            </div>
        </div>
        
        <div class="status-banner mono" id="status-banner">
            </div>

        <div class="floor-card">
            <div class="floor-header">
                <div class="floor-title">3F <span class="floor-tag">Director's Floor</span></div>
                <div class="floor-tag sec-3">RESTRICTED AREA (LV.5)</div>
            </div>
            <div class="zone-grid mono" id="floor-3"></div>
        </div>

        <div class="floor-card">
            <div class="floor-header">
                <div class="floor-title">2F <span class="floor-tag">Research & Staff</span></div>
                <div class="floor-tag sec-2">AUTHORIZED ONLY</div>
            </div>
            <div class="zone-grid mono" id="floor-2"></div>
        </div>

        <div class="floor-card">
            <div class="floor-header">
                <div class="floor-title">1F <span class="floor-tag">Lobby & Medical</span></div>
                <div class="floor-tag sec-1">COMMON AREA</div>
            </div>
            <div class="zone-grid mono" id="floor-1"></div>
        </div>

        <div class="floor-card" style="border-left: 3px solid var(--accent);">
            <div class="floor-header">
                <div class="floor-title" style="color:var(--accent);">B1 <span class="floor-tag">Subject & Experiment</span></div>
                <div class="floor-tag sec-3">BIOHAZARD / CONTROLLED</div>
            </div>
            <div class="zone-grid mono" id="floor-b1"></div>
        </div>

        <div class="floor-card" style="border-left: 3px solid var(--danger);">
            <div class="floor-header">
                <div class="floor-title" style="color:#888;">B2 <span class="floor-tag">Disposal & Infra</span></div>
                <div class="floor-tag sec-2">MAINTENANCE</div>
            </div>
            <div class="zone-grid mono" id="floor-b2"></div>
        </div>

    </main>

    <script>
        function updateClock() {
            const now = new Date();
            const kstTime = now.toLocaleTimeString('en-GB', { timeZone: 'Asia/Seoul', hour12: false });
            const kstDate = now.toLocaleDateString('en-CA', { timeZone: 'Asia/Seoul' });
            document.getElementById('clock').innerText = kstTime;
            document.getElementById('date').innerText = kstDate;
        }
        setInterval(updateClock, 1000); updateClock();

        function rnd(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

        function updateLocations() {
            const hour = new Date().getHours();
            
            // 14Ïãú~16ÏãúÎäî Î¶¨ÌîåÎ¶¨ Í¥ÄÎ¶¨ ÏãúÍ∞Ñ (B1 Ïù¥Îèô)
            const isVisitTime = (hour >= 14 && hour < 16); 
            const isWorkTime = (hour >= 9 && hour < 18);
            
            // Ïπ¥Ïù¥Î°ú ÏúÑÏπò ÏÑ§Ï†ï
            let kairoLocationName = "";
            let kairoInOffice = false;
            let kairoInIso = false;

            if (isVisitTime) {
                kairoInIso = true; // B1 Í≤©Î¶¨Ïã§
                kairoLocationName = "B1 ÌäπÏàò Í≤©Î¶¨Ïã§ (R-001)";
            } else {
                kairoInOffice = true; // 3F ÏßëÎ¨¥Ïã§
                kairoLocationName = "3F ÏÜåÏû• ÏßëÎ¨¥Ïã§";
            }

            // ÏÉÅÌÉú Î∞∞ÎÑà ÏóÖÎç∞Ïù¥Ìä∏ (Ï§ëÎ≥µ ÏãúÍ∞Ñ ÏÇ≠Ï†ú)
            const banner = document.getElementById('status-banner');
            banner.innerHTML = `
                <div><span style="color:#888;">STATUS:</span> <span style="color:#fff; font-weight:bold;">${isWorkTime ? "EXPERIMENT CYCLE" : "NIGHT CYCLE"}</span></div>
                <div class="kairo-status">
                    <span style="color:var(--danger);">‚òÖ DIRECTOR KAIRO LOC:</span> 
                    <span style="border-bottom:1px solid var(--danger);">${kairoLocationName}</span>
                </div>
            `;

            // 3F Îç∞Ïù¥ÌÑ∞
            const f3_zones = [
                { name: "ÏÜåÏû• ÏßëÎ¨¥Ïã§", staff: 0, kairo: kairoInOffice }, 
                { name: "ÏÜåÏû• Ïπ®Ïã§/ÏÑúÏû¨", staff: 0 },
                { name: "Î≥¥Ïïà Í¥ÄÏ†úÏã§", staff: rnd(3, 5) },
                { name: "Ï†ëÍ≤¨Ïã§", staff: 0 }
            ];

            // 2F Îç∞Ïù¥ÌÑ∞ (ÏßÅÏõêÎì§ Î∞îÍ∏ÄÎ∞îÍ∏Ä)
            const f2_zones = [
                { name: "ÏÑ∏Ìè¨ Î∂ÑÏÑùÏã§", staff: rnd(15, 25) },
                { name: "Ïú†Ï†ÑÏûê Î≥ÄÏù¥ Ïó∞Íµ¨Ïã§", staff: rnd(20, 30) },
                { name: "Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑùÏã§", staff: rnd(10, 15) },
                { name: "Ïó∞Íµ¨Ïõê ÏÇ¨Î¨¥Ïã§", staff: rnd(30, 50) },
                { name: "ÌöåÏùòÏã§", staff: rnd(0, 10) }
            ];

            // 1F Îç∞Ïù¥ÌÑ∞
            const f1_zones = [
                { name: "Ï§ëÏïô Î°úÎπÑ", staff: rnd(4, 8), sub: rnd(0, 2) },
                { name: "Î≥¥Ïïà Í≤ÄÏÉâÎåÄ", staff: rnd(4, 6) },
                { name: "Ï£º ÏùòÎ£åÎèô", staff: rnd(10, 15), sub: rnd(5, 10) },
                { name: "ÏùëÍ∏â Ï≤òÏπòÏã§", staff: rnd(2, 4), sub: rnd(0, 2) },
                { name: "Ïô∏Î∂ÄÏù∏ ÌÜµÏ†úÏã§", staff: rnd(2, 3) }
            ];

            // B1 Îç∞Ïù¥ÌÑ∞
            const fb1_zones = [
                { name: "Ï†ú1 Ï§ëÏïô Ïã§ÌóòÏã§", staff: rnd(10, 15), sub: rnd(5, 10) }, 
                { name: "Ï†ú2 Ï§ëÏïô Ïã§ÌóòÏã§", staff: rnd(8, 12), sub: rnd(4, 8) },
                
                // ‚òÖ Î¶¨ÌîåÎ¶¨ Ï†ÑÏö© Íµ¨Ïó≠ (Ïó∞Íµ¨Ïõê Ï∂úÏûÖ Í∏àÏßÄ) ‚òÖ
                { name: "ÌäπÏàò Í≤©Î¶¨Ïã§ (R-001)", staff: 0, ripley: true, kairo: kairoInIso },
                
                // ÏùºÎ∞ò Ïã§ÌóòÏ≤¥ ÏàòÏö©ÏÜå (ÎåÄÍ∑úÎ™® Ïù∏Ïõê)
                { name: "Í∞úÎ≥Ñ Í≤©Î¶¨Ïã§ (AÍµ¨Ïó≠)", staff: rnd(2, 4), sub: rnd(120, 140) },
                { name: "Í∞úÎ≥Ñ Í≤©Î¶¨Ïã§ (BÍµ¨Ïó≠)", staff: rnd(2, 4), sub: rnd(120, 140) },
                { name: "Í∞úÎ≥Ñ Í≤©Î¶¨Ïã§ (CÍµ¨Ïó≠)", staff: rnd(2, 4), sub: rnd(100, 120) },
                
                { name: "ÏÑ∏Ï≤ô Î∞è ÏÜåÎèÖÏã§", staff: rnd(1, 3) }
            ];

            // B2 Îç∞Ïù¥ÌÑ∞
            const fb2_zones = [
                { name: "Ï§ëÏïô ÌèêÍ∏∞Î¨º Ï≤òÎ¶¨Ïû•", staff: rnd(2, 5), sub: rnd(2, 5) },
                { name: "Ï†ÑÎ†• Í≥µÍ∏âÏã§", staff: rnd(1, 2) },
                { name: "Ï§ëÏïô ÏÑúÎ≤ÑÏã§", staff: rnd(1, 2) },
                { name: "Î¨ºÏûê Î≥¥Í¥Ä Ï∞ΩÍ≥†", staff: 0 }
            ];

            const draw = (id, zones) => {
                const container = document.getElementById(id);
                let html = '';
                zones.forEach(z => {
                    let icons = '';
                    
                    // Ïπ¥Ïù¥Î°ú ÏïÑÏù¥ÏΩò
                    if (z.kairo) icons += `<div class="special-badge badge-kairo">‚òÖ KAIRO</div>`;
                    
                    // Î¶¨ÌîåÎ¶¨ ÏïÑÏù¥ÏΩò
                    if (z.ripley) icons += `<div class="special-badge badge-ripley">‚ò£ ER-S-02-001</div>`;
                    
                    // Ïó∞Íµ¨Ïõê (Staff)
                    if (z.staff > 0) icons += `<span class="occ-item icon-staff">üë§ Ïó∞Íµ¨Ïõê ${z.staff}Î™Ö</span>`;
                    
                    // Ïã§ÌóòÏ≤¥ (Subject)
                    if (z.sub > 0) icons += `<span class="occ-item icon-sub">üß¨ Ïã§ÌóòÏ≤¥ ${z.sub}Ï≤¥</span>`;
                    
                    if (icons === '') icons = `<span style="color:#444; font-size:11px;">- Empty -</span>`;

                    html += `
                        <div class="zone-box">
                            <div class="zone-name">${z.name}</div>
                            <div class="occupancy">${icons}</div>
                        </div>
                    `;
                });
                container.innerHTML = html;
            };

            draw('floor-3', f3_zones);
            draw('floor-2', f2_zones);
            draw('floor-1', f1_zones);
            draw('floor-b1', fb1_zones);
            draw('floor-b2', fb2_zones);
        }

        updateLocations(); 
    </script>
</body>
</html>
